FROM nginx:1.21-alpine

ARG NGINX_CONF
ARG SERVER_NAME
ARG SERVER_SSL_CERTIFICATE_KEY
ARG SERVER_SSL_CERTIFICATE_CHAIN

RUN rm /etc/nginx/conf.d/default.conf
COPY ./$NGINX_CONF /etc/nginx/conf.d

ENV SERVER_NAME $SERVER_NAME
ENV SERVER_SSL_CERTIFICATE_KEY $SERVER_SSL_CERTIFICATE_KEY
ENV SERVER_SSL_CERTIFICATE_CHAIN $SERVER_SSL_CERTIFICATE_CHAIN